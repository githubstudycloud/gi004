# Claude Code SSH/Git 命令豁免配置说明

## 配置文件位置

```
C:\Users\John\.claude\settings.json
```

## 已添加的豁免规则

以下命令已配置为自动允许，无需手动确认：

| 命令 | 规则 | 说明 |
|------|------|------|
| git | `Bash(git :*)` | 所有 git 命令及其参数 |
| ssh | `Bash(ssh :*)` | SSH 远程连接命令 |
| ssh-keygen | `Bash(ssh-keygen :*)` | SSH 密钥生成 |
| ssh-add | `Bash(ssh-add :*)` | SSH 密钥添加到代理 |
| ssh-agent | `Bash(ssh-agent :*)` | SSH 代理管理 |
| scp | `Bash(scp :*)` | 安全文件复制 |
| sftp | `Bash(sftp :*)` | 安全文件传输 |
| rsync | `Bash(rsync :*)` | 文件同步 |
| git-lfs | `Bash(git-lfs :*)` | Git 大文件存储 |

## 配置语法说明

- `:*` 是通配符，表示匹配任意后续参数
- `Bash(git)` 匹配不带参数的 git 命令
- `Bash(git :*)` 匹配带任意参数的 git 命令

## 完整配置内容

```json
{
  "permissions": {
    "allow": [
      "Bash(git :*)",
      "Bash(git)",
      "Bash(ssh :*)",
      "Bash(ssh)",
      "Bash(ssh-keygen :*)",
      "Bash(ssh-add :*)",
      "Bash(ssh-agent :*)",
      "Bash(scp :*)",
      "Bash(sftp :*)",
      "Bash(rsync :*)",
      "Bash(git-lfs :*)"
    ],
    "deny": []
  }
}
```

## 如何添加更多豁免

如需添加其他命令豁免，编辑 `settings.json` 文件，在 `allow` 数组中添加新规则：

```json
"Bash(命令名 :*)"
```

## 权限优先级

1. `deny` - 最高优先级，完全阻止
2. `ask` - 需要用户确认
3. `allow` - 自动允许

## 注意事项

- 配置修改后需要重启 VSCode 或 Claude Code 插件生效
- 请谨慎添加豁免规则，避免安全风险
- 不建议豁免 `rm -rf`、`sudo` 等危险命令

---
*配置时间: 2025-11-27*
